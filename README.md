# FileCodeBox Goç‰ˆæœ¬

ğŸš€ FileCodeBoxçš„é«˜æ€§èƒ½Golangå®ç° - å¼€ç®±å³ç”¨çš„æ–‡ä»¶å¿«ä¼ ç³»ç»Ÿ

## âœ¨ ç‰¹æ€§

- ğŸ”¥ **é«˜æ€§èƒ½** - Golangå®ç°ï¼Œå¹¶å‘å¤„ç†èƒ½åŠ›å¼º
- ğŸ“ **æ–‡ä»¶åˆ†äº«** - æ”¯æŒå„ç§æ ¼å¼æ–‡ä»¶çš„å¿«é€Ÿåˆ†äº«
- ğŸ“ **æ–‡æœ¬åˆ†äº«** - æ”¯æŒæ–‡æœ¬å†…å®¹çš„å¿«é€Ÿåˆ†äº«
- ğŸ”§ **åˆ†ç‰‡ä¸Šä¼ ** - æ”¯æŒå¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ ï¼Œæ–­ç‚¹ç»­ä¼ 
- âš¡ **æ–­ç‚¹ç»­ä¼ ** - ç½‘ç»œä¸­æ–­åå¯æ¢å¤ä¸Šä¼ ï¼Œæ”¯æŒç§’ä¼ 
- â° **çµæ´»è¿‡æœŸ** - æ”¯æŒæ—¶é—´å’Œæ¬¡æ•°ä¸¤ç§è¿‡æœŸæ–¹å¼
- ğŸ›¡ï¸ **å®‰å…¨å¯é ** - JWTè®¤è¯ã€é™æµä¿æŠ¤ã€æƒé™æ§åˆ¶
- ğŸ“Š **ç®¡ç†åå°** - å®Œæ•´çš„æ–‡ä»¶ç®¡ç†å’Œç³»ç»Ÿé…ç½®
- ğŸ—„ï¸ **å¤šå­˜å‚¨** - æ”¯æŒæœ¬åœ°ã€WebDAVã€S3å­˜å‚¨
- ğŸ³ **å®¹å™¨åŒ–** - å¼€ç®±å³ç”¨çš„Dockeréƒ¨ç½²
- ğŸ¨ **ä¸»é¢˜ç³»ç»Ÿ** - æ”¯æŒå¤šä¸»é¢˜åˆ‡æ¢

## å¿«é€Ÿå¼€å§‹

### ç›´æ¥è¿è¡Œ

```bash
# å®‰è£…ä¾èµ–
go mod tidy

# ç¼–è¯‘å¹¶è¿è¡Œ
go build -o filecodebox
./filecodebox
```

### Dockerè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker build -t filecodebox-go .

# è¿è¡Œå®¹å™¨
docker run -d -p 12345:12345 -v ./data:/root/data filecodebox-go
```

### Docker Compose

```bash
docker-compose up -d
```

## é…ç½®

é…ç½®æ–‡ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆåœ¨ `data/config.json`ï¼Œä¸»è¦é…ç½®é¡¹ï¼š

- `port`: æœåŠ¡ç«¯å£ï¼ˆé»˜è®¤12345ï¼‰
- `name`: ç«™ç‚¹åç§°
- `upload_size`: æœ€å¤§ä¸Šä¼ å¤§å°
- `file_storage`: å­˜å‚¨ç±»å‹ï¼ˆlocal/s3/webdav/onedriveï¼‰
- `admin_token`: ç®¡ç†å‘˜è®¿é—®ä»¤ç‰Œ

## APIæ¥å£

### åˆ†äº«æ–‡æœ¬
```
POST /share/text/
```

### åˆ†äº«æ–‡ä»¶
```
POST /share/file/
```

### è·å–åˆ†äº«å†…å®¹
```
GET /share/select/?code=xxx
POST /share/select/
```

### åˆ†ç‰‡ä¸Šä¼ å’Œæ–­ç‚¹ç»­ä¼ 
```
POST /chunk/upload/init/          # åˆå§‹åŒ–åˆ†ç‰‡ä¸Šä¼ 
POST /chunk/upload/chunk/:upload_id/:chunk_index # ä¸Šä¼ åˆ†ç‰‡
POST /chunk/upload/complete/:upload_id            # å®Œæˆä¸Šä¼ 
GET  /chunk/upload/status/:upload_id              # è·å–ä¸Šä¼ çŠ¶æ€
POST /chunk/upload/verify/:upload_id/:chunk_index # éªŒè¯åˆ†ç‰‡
DELETE /chunk/upload/cancel/:upload_id            # å–æ¶ˆä¸Šä¼ 
```

### ç®¡ç†æ¥å£
```
GET /admin/stats         # ç»Ÿè®¡ä¿¡æ¯
GET /admin/files         # æ–‡ä»¶åˆ—è¡¨
DELETE /admin/files/:id  # åˆ é™¤æ–‡ä»¶
GET /admin/config        # è·å–é…ç½®
PUT /admin/config        # æ›´æ–°é…ç½®
```

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ main.go                 # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ config/            # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ handlers/          # HTTPå¤„ç†å™¨
â”‚   â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ storage/           # å­˜å‚¨æ¥å£
â”‚   â”œâ”€â”€ routes/            # è·¯ç”±è®¾ç½®
â”‚   â””â”€â”€ tasks/             # åå°ä»»åŠ¡
â”œâ”€â”€ data/                  # æ•°æ®ç›®å½•
â”œâ”€â”€ themes/                # ä¸»é¢˜æ–‡ä»¶
â””â”€â”€ docker-compose.yml     # Dockerç¼–æ’
```

## ä¸Pythonç‰ˆæœ¬çš„å·®å¼‚

1. **æ€§èƒ½æå‡**: Goç‰ˆæœ¬å…·æœ‰æ›´å¥½çš„å¹¶å‘æ€§èƒ½å’Œæ›´ä½çš„å†…å­˜å ç”¨
2. **ä¾èµ–æ›´å°‘**: ä¸éœ€è¦Pythonè¿è¡Œæ—¶ç¯å¢ƒ
3. **éƒ¨ç½²ç®€å•**: ç¼–è¯‘åä¸ºå•ä¸€å¯æ‰§è¡Œæ–‡ä»¶
4. **ç±»å‹å®‰å…¨**: é™æ€ç±»å‹ç³»ç»Ÿå‡å°‘è¿è¡Œæ—¶é”™è¯¯

## å¼€å‘

### æ·»åŠ æ–°çš„å­˜å‚¨åç«¯

1. å®ç° `storage.StorageInterface` æ¥å£
2. åœ¨ `storage.NewStorageManager` ä¸­æ³¨å†Œæ–°å­˜å‚¨
3. åœ¨é…ç½®ä¸­æ·»åŠ ç›¸å…³é…ç½®é¡¹

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `models/` ä¸­å®šä¹‰æ•°æ®æ¨¡å‹
2. åœ¨ `services/` ä¸­å®ç°ä¸šåŠ¡é€»è¾‘
3. åœ¨ `handlers/` ä¸­æ·»åŠ HTTPå¤„ç†å™¨
4. åœ¨ `routes/` ä¸­æ³¨å†Œè·¯ç”±

## è®¸å¯è¯

ä¸åŸPythonç‰ˆæœ¬ä¿æŒä¸€è‡´çš„å¼€æºè®¸å¯è¯ã€‚
