# å‘å¸ƒè„šæœ¬ä½¿ç”¨æŒ‡å—

æœ¬ç›®å½•åŒ…å«äº†ç”¨äºè‡ªåŠ¨åŒ–ä»£ç æäº¤ã€ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒçš„è„šæœ¬å·¥å…·ã€‚

## è„šæœ¬åˆ—è¡¨

### 1. release.sh - å®Œæ•´å‘å¸ƒè„šæœ¬ ğŸš€

åŠŸèƒ½æœ€å…¨é¢çš„å‘å¸ƒè„šæœ¬ï¼Œç”¨äºæ­£å¼ç‰ˆæœ¬å‘å¸ƒã€‚

**ä¸»è¦åŠŸèƒ½:**
- è‡ªåŠ¨ç‰ˆæœ¬ç®¡ç†å’Œæ ‡ç­¾åˆ›å»º
- ä»£ç è´¨é‡æ£€æŸ¥å’Œæµ‹è¯•
- Dockeré•œåƒæ„å»º
- è‡ªåŠ¨ç”Ÿæˆå˜æ›´æ—¥å¿—
- Gitæäº¤å’Œæ¨é€
- å®Œæ•´çš„å‘å¸ƒæµç¨‹

**ä½¿ç”¨æ–¹æ³•:**
```bash
# åŸºæœ¬ç”¨æ³•
./release.sh v1.0.0

# é¢„å‘å¸ƒç‰ˆæœ¬
./release.sh v1.1.0-beta --pre-release

# è‡ªå®šä¹‰æäº¤ä¿¡æ¯
./release.sh v1.0.1 -m "ä¿®å¤é‡è¦å®‰å…¨æ¼æ´"

# åŒ…å«Dockeræ„å»º
./release.sh v1.0.0 --build

# æ¨¡æ‹Ÿè¿è¡Œï¼ˆä¸æ‰§è¡Œå®é™…æ“ä½œï¼‰
./release.sh v1.0.0 --dry-run

# å¼ºåˆ¶æ‰§è¡Œï¼ˆè·³è¿‡ç¡®è®¤ï¼‰
./release.sh v1.0.0 --force
```

**å‚æ•°è¯´æ˜:**
- `-h, --help`: æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- `-d, --dry-run`: æ¨¡æ‹Ÿè¿è¡Œï¼Œä¸æ‰§è¡Œå®é™…æ“ä½œ
- `-f, --force`: å¼ºåˆ¶æ‰§è¡Œï¼Œè·³è¿‡ç¡®è®¤æç¤º
- `-m, --message`: è‡ªå®šä¹‰æäº¤ä¿¡æ¯
- `-p, --pre-release`: æ ‡è®°ä¸ºé¢„å‘å¸ƒç‰ˆæœ¬
- `-b, --build`: å‘å¸ƒå‰æ„å»ºDockeré•œåƒ

### 2. quick-push.sh - å¿«é€Ÿæ¨é€è„šæœ¬ âš¡

ç”¨äºæ—¥å¸¸å¼€å‘ä¸­çš„å¿«é€Ÿä»£ç æäº¤å’Œæ¨é€ã€‚

**ä¸»è¦åŠŸèƒ½:**
- å¿«é€Ÿæ·»åŠ ã€æäº¤å’Œæ¨é€ä»£ç 
- äº¤äº’å¼æäº¤ä¿¡æ¯è¾“å…¥
- ç®€å•çš„GitçŠ¶æ€æ£€æŸ¥

**ä½¿ç”¨æ–¹æ³•:**
```bash
# äº¤äº’å¼ä½¿ç”¨
./quick-push.sh

# ç›´æ¥æä¾›æäº¤ä¿¡æ¯
./quick-push.sh "ä¿®å¤ç”¨æˆ·ç™»å½•é—®é¢˜"

# è‡ªåŠ¨ç”Ÿæˆæ—¶é—´æˆ³æäº¤ä¿¡æ¯
./quick-push.sh ""
```

### 3. tag-manager.sh - æ ‡ç­¾ç®¡ç†è„šæœ¬ ğŸ·ï¸

ä¸“é—¨ç”¨äºGitæ ‡ç­¾çš„ç®¡ç†æ“ä½œã€‚

**ä¸»è¦åŠŸèƒ½:**
- åˆ›å»ºã€åˆ é™¤ã€æ¨é€æ ‡ç­¾
- åˆ—å‡ºå’ŒæŸ¥çœ‹æ ‡ç­¾è¯¦æƒ…
- æ ‡ç­¾æ ¼å¼éªŒè¯
- è¿œç¨‹æ ‡ç­¾åŒæ­¥

**ä½¿ç”¨æ–¹æ³•:**
```bash
# åˆ›å»ºæ ‡ç­¾
./tag-manager.sh create v1.0.0
./tag-manager.sh create v1.0.1 -m "ä¿®å¤é‡è¦bug"

# åˆ é™¤æ ‡ç­¾
./tag-manager.sh delete v1.0.0
./tag-manager.sh delete v1.0.0 -f  # å¼ºåˆ¶åˆ é™¤

# åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾
./tag-manager.sh list

# æ¨é€æ ‡ç­¾
./tag-manager.sh push v1.0.0
./tag-manager.sh push all  # æ¨é€æ‰€æœ‰æ ‡ç­¾

# æ‹‰å–è¿œç¨‹æ ‡ç­¾
./tag-manager.sh pull

# æŸ¥çœ‹æ ‡ç­¾è¯¦æƒ…
./tag-manager.sh show v1.0.0
```

## ä½¿ç”¨åœºæ™¯

### æ—¥å¸¸å¼€å‘æäº¤
```bash
# å¿«é€Ÿæäº¤æ—¥å¸¸å¼€å‘æ›´æ”¹
./quick-push.sh "ä¼˜åŒ–ç”¨æˆ·ç•Œé¢"
```

### åŠŸèƒ½å®Œæˆå‘å¸ƒ
```bash
# å®Œæ•´çš„ç‰ˆæœ¬å‘å¸ƒæµç¨‹
./release.sh v1.1.0 --build
```

### ç´§æ€¥ä¿®å¤å‘å¸ƒ
```bash
# å¿«é€Ÿä¿®å¤å‘å¸ƒ
./release.sh v1.0.1 -m "ç´§æ€¥ä¿®å¤å®‰å…¨æ¼æ´" --force
```

### é¢„å‘å¸ƒæµ‹è¯•
```bash
# åˆ›å»ºé¢„å‘å¸ƒç‰ˆæœ¬
./release.sh v1.2.0-beta --pre-release --dry-run  # å…ˆæ¨¡æ‹Ÿ
./release.sh v1.2.0-beta --pre-release             # å®é™…æ‰§è¡Œ
```

### æ ‡ç­¾ç®¡ç†
```bash
# ç®¡ç†å‘å¸ƒæ ‡ç­¾
./tag-manager.sh create v1.0.0-rc1 -m "å€™é€‰å‘å¸ƒç‰ˆæœ¬"
./tag-manager.sh push v1.0.0-rc1
```

## ç‰ˆæœ¬å·è§„èŒƒ

æ‰€æœ‰è„šæœ¬éƒ½éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ (SemVer) è§„èŒƒï¼š

- `v1.0.0` - æ­£å¼ç‰ˆæœ¬
- `v1.0.1` - è¡¥ä¸ç‰ˆæœ¬
- `v1.1.0` - æ¬¡è¦ç‰ˆæœ¬
- `v2.0.0` - ä¸»è¦ç‰ˆæœ¬
- `v1.0.0-alpha` - Alphaç‰ˆæœ¬
- `v1.0.0-beta` - Betaç‰ˆæœ¬
- `v1.0.0-rc1` - å€™é€‰ç‰ˆæœ¬

## å·¥ä½œæµç¨‹å»ºè®®

### å¼€å‘æµç¨‹
1. æ—¥å¸¸å¼€å‘ä½¿ç”¨ `quick-push.sh` è¿›è¡Œå¿«é€Ÿæäº¤
2. åŠŸèƒ½å®Œæˆåä½¿ç”¨ `release.sh` è¿›è¡Œç‰ˆæœ¬å‘å¸ƒ
3. ä½¿ç”¨ `tag-manager.sh` ç®¡ç†ç‰¹æ®Šæ ‡ç­¾éœ€æ±‚

### å‘å¸ƒæµç¨‹
1. **å¼€å‘å®Œæˆ** â†’ ä½¿ç”¨ `quick-push.sh` æäº¤æœ€ç»ˆæ›´æ”¹
2. **æµ‹è¯•éªŒè¯** â†’ ä½¿ç”¨ `release.sh --dry-run` æ¨¡æ‹Ÿå‘å¸ƒ
3. **æ­£å¼å‘å¸ƒ** â†’ ä½¿ç”¨ `release.sh` è¿›è¡Œå®Œæ•´å‘å¸ƒ
4. **æ ‡ç­¾ç®¡ç†** â†’ ä½¿ç”¨ `tag-manager.sh` è¿›è¡Œåç»­æ ‡ç­¾æ“ä½œ

## æ³¨æ„äº‹é¡¹

### æƒé™è¦æ±‚
- è„šæœ¬éœ€è¦æ‰§è¡Œæƒé™: `chmod +x *.sh`
- éœ€è¦Gitä»“åº“çš„æ¨é€æƒé™
- Dockeræ„å»ºéœ€è¦Dockerç¯å¢ƒ

### ç¯å¢ƒè¦æ±‚
- Git 2.0+
- Go 1.25+ (ç”¨äºæ„å»º)
- Docker (å¯é€‰ï¼Œç”¨äºå®¹å™¨æ„å»º)
- Bash 4.0+

### å®‰å…¨å»ºè®®
- åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰ï¼Œå…ˆç”¨ `--dry-run` æ¨¡æ‹Ÿ
- é‡è¦å‘å¸ƒå‰å¤‡ä»½ä»£ç å’Œæ•°æ®
- ç¡®è®¤è¿œç¨‹ä»“åº“åœ°å€æ­£ç¡®
- å®šæœŸæ›´æ–°è„šæœ¬ä»¥é€‚åº”é¡¹ç›®å˜åŒ–

### æ•…éšœæ’é™¤

**è„šæœ¬æƒé™é—®é¢˜:**
```bash
chmod +x release.sh quick-push.sh tag-manager.sh
```

**Gitæ¨é€å¤±è´¥:**
```bash
# æ£€æŸ¥è¿œç¨‹ä»“åº“é…ç½®
git remote -v

# æ£€æŸ¥è®¤è¯çŠ¶æ€
ssh -T git@github.com
```

**ç‰ˆæœ¬å·æ ¼å¼é”™è¯¯:**
```bash
# æ­£ç¡®æ ¼å¼ç¤ºä¾‹
v1.0.0, v1.2.3-beta, v2.0.0-rc1

# é”™è¯¯æ ¼å¼
1.0.0, v1.0, v1.0.0.1
```

## è‡ªå®šä¹‰é…ç½®

å¯ä»¥é€šè¿‡ä¿®æ”¹è„šæœ¬é¡¶éƒ¨çš„é…ç½®å˜é‡æ¥è‡ªå®šä¹‰è¡Œä¸ºï¼š

```bash
# åœ¨è„šæœ¬ä¸­ä¿®æ”¹è¿™äº›å˜é‡
DEFAULT_BRANCH="main"        # é»˜è®¤åˆ†æ”¯
DOCKER_REGISTRY="your-registry"  # Dockerä»“åº“åœ°å€
TEST_COMMAND="go test ./..."     # æµ‹è¯•å‘½ä»¤
```

## è„šæœ¬é›†æˆ

è¿™äº›è„šæœ¬å¯ä»¥é›†æˆåˆ°CI/CDæµç¨‹ä¸­ï¼š

```yaml
# GitHub Actions ç¤ºä¾‹
- name: Release
  run: ./release.sh ${{ github.event.inputs.version }} --force
```

```yaml
# GitLab CI ç¤ºä¾‹
release:
  script:
    - ./release.sh $CI_COMMIT_TAG --force
  only:
    - tags
```
