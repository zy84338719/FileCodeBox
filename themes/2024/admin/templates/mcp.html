<div class="mcp-management">
    <!-- MCPç®¡ç†å¤´éƒ¨ -->
    <div class="page-header">
        <div class="header-left">
            <h2>MCP æœåŠ¡å™¨ç®¡ç†</h2>
            <p>ç®¡ç† Model Context Protocol æœåŠ¡å™¨è¿æ¥ï¼Œæ”¯æŒå¤šç§AIæ¨¡å‹å’Œå·¥å…·é›†æˆ</p>
        </div>
        <div class="header-right">
            <button id="refresh-mcp-servers-btn" class="btn btn-secondary">
                <i class="icon-refresh"></i> åˆ·æ–°çŠ¶æ€
            </button>
            <button id="add-mcp-server-btn" class="btn btn-primary">
                <i class="icon-plus"></i> æ·»åŠ æœåŠ¡å™¨
            </button>
        </div>
    </div>

    <!-- MCPä»‹ç» -->
    <div class="intro-section">
        <div class="intro-card">
            <div class="intro-icon">ğŸ”Œ</div>
            <div class="intro-content">
                <h3>ä»€ä¹ˆæ˜¯ MCPï¼Ÿ</h3>
                <p>Model Context Protocol (MCP) æ˜¯ä¸€ä¸ªæ ‡å‡†åŒ–çš„åè®®ï¼Œç”¨äºè¿æ¥AIæ¨¡å‹ä¸å„ç§å·¥å…·å’Œæ•°æ®æºã€‚é€šè¿‡MCPæœåŠ¡å™¨ï¼Œæ‚¨å¯ä»¥æ‰©å±•FileCodeBoxçš„åŠŸèƒ½ï¼Œé›†æˆå¤–éƒ¨APIã€æ•°æ®åº“ã€æ–‡ä»¶å¤„ç†å·¥å…·ç­‰ã€‚</p>
            </div>
        </div>
    </div>

    <!-- MCPæœåŠ¡å™¨åˆ—è¡¨ -->
    <div class="servers-section">
        <div class="section-header">
            <h3>MCP æœåŠ¡å™¨åˆ—è¡¨</h3>
            <div class="server-stats">
                <span class="stat-item">
                    <span class="stat-label">æ€»æ•°:</span>
                    <span class="stat-value" id="total-servers">0</span>
                </span>
                <span class="stat-item">
                    <span class="stat-label">åœ¨çº¿:</span>
                    <span class="stat-value" id="online-servers">0</span>
                </span>
                <span class="stat-item">
                    <span class="stat-label">ç¦»çº¿:</span>
                    <span class="stat-value" id="offline-servers">0</span>
                </span>
            </div>
        </div>
        
        <div id="mcp-servers-container" class="servers-container">
            <!-- MCPæœåŠ¡å™¨å¡ç‰‡å°†ç”±JavaScriptåŠ¨æ€å¡«å…… -->
        </div>
    </div>

    <!-- å¿«é€Ÿè¿æ¥æ¨¡æ¿ -->
    <div class="templates-section">
        <div class="section-header">
            <h3>å¿«é€Ÿè¿æ¥æ¨¡æ¿</h3>
            <p>ä½¿ç”¨é¢„é…ç½®çš„æ¨¡æ¿å¿«é€Ÿè¿æ¥å¸¸ç”¨çš„MCPæœåŠ¡å™¨</p>
        </div>
        
        <div class="templates-grid">
            <div class="template-card">
                <div class="template-icon">ğŸ—„ï¸</div>
                <div class="template-content">
                    <h4>æ•°æ®åº“è¿æ¥å™¨</h4>
                    <p>è¿æ¥MySQLã€PostgreSQLã€SQLiteç­‰æ•°æ®åº“</p>
                    <div class="template-features">
                        <span class="feature-tag">SQLæŸ¥è¯¢</span>
                        <span class="feature-tag">æ•°æ®å¯¼å‡º</span>
                        <span class="feature-tag">è¡¨ç®¡ç†</span>
                    </div>
                </div>
                <button class="btn btn-sm btn-secondary" data-template="database">ä½¿ç”¨æ¨¡æ¿</button>
            </div>
            
            <div class="template-card">
                <div class="template-icon">ğŸŒ</div>
                <div class="template-content">
                    <h4>Web API è¿æ¥å™¨</h4>
                    <p>è¿æ¥REST APIã€GraphQLç­‰WebæœåŠ¡</p>
                    <div class="template-features">
                        <span class="feature-tag">HTTPè¯·æ±‚</span>
                        <span class="feature-tag">JSONå¤„ç†</span>
                        <span class="feature-tag">è®¤è¯æ”¯æŒ</span>
                    </div>
                </div>
                <button class="btn btn-sm btn-secondary" data-template="webapi">ä½¿ç”¨æ¨¡æ¿</button>
            </div>
            
            <div class="template-card">
                <div class="template-icon">ğŸ“</div>
                <div class="template-content">
                    <h4>æ–‡ä»¶å¤„ç†å™¨</h4>
                    <p>æ–‡ä»¶æ ¼å¼è½¬æ¢ã€å›¾ç‰‡å¤„ç†ã€æ–‡æ¡£è§£æ</p>
                    <div class="template-features">
                        <span class="feature-tag">æ ¼å¼è½¬æ¢</span>
                        <span class="feature-tag">å›¾ç‰‡å¤„ç†</span>
                        <span class="feature-tag">æ–‡æ¡£è§£æ</span>
                    </div>
                </div>
                <button class="btn btn-sm btn-secondary" data-template="fileprocessor">ä½¿ç”¨æ¨¡æ¿</button>
            </div>
            
            <div class="template-card">
                <div class="template-icon">ğŸ¤–</div>
                <div class="template-content">
                    <h4>AI å·¥å…·é›†</h4>
                    <p>é›†æˆå„ç§AIæœåŠ¡å’Œæœºå™¨å­¦ä¹ å·¥å…·</p>
                    <div class="template-features">
                        <span class="feature-tag">æ–‡æœ¬åˆ†æ</span>
                        <span class="feature-tag">å›¾åƒè¯†åˆ«</span>
                        <span class="feature-tag">è¯­éŸ³å¤„ç†</span>
                    </div>
                </div>
                <button class="btn btn-sm btn-secondary" data-template="aitools">ä½¿ç”¨æ¨¡æ¿</button>
            </div>
        </div>
    </div>

    <!-- MCPæ–‡æ¡£é“¾æ¥ -->
    <div class="docs-section">
        <div class="docs-card">
            <div class="docs-icon">ğŸ“š</div>
            <div class="docs-content">
                <h3>MCP å¼€å‘æ–‡æ¡£</h3>
                <p>äº†è§£å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰MCPæœåŠ¡å™¨å’Œæ‰©å±•FileCodeBoxåŠŸèƒ½</p>
                <div class="docs-links">
                    <a href="#" class="docs-link">MCP åè®®è§„èŒƒ</a>
                    <a href="#" class="docs-link">å¼€å‘æŒ‡å—</a>
                    <a href="#" class="docs-link">ç¤ºä¾‹ä»£ç </a>
                    <a href="#" class="docs-link">ç¤¾åŒºæ’ä»¶</a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- MCPæœåŠ¡å™¨ç¼–è¾‘æ¨¡æ€æ¡† -->
<div id="mcp-server-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="mcp-server-modal-title">æ·»åŠ MCPæœåŠ¡å™¨</h3>
            <button class="modal-close mcp-modal-close">&times;</button>
        </div>
        
        <div class="modal-body">
            <form class="form-grid">
                <div class="form-group">
                    <label for="mcp-server-name">æœåŠ¡å™¨åç§° *</label>
                    <input type="text" id="mcp-server-name" class="form-input" required>
                    <div class="field-help">ç»™æœåŠ¡å™¨ä¸€ä¸ªæ˜“äºè¯†åˆ«çš„åç§°</div>
                </div>
                
                <div class="form-group">
                    <label for="mcp-server-host">æœåŠ¡å™¨åœ°å€ *</label>
                    <input type="text" id="mcp-server-host" class="form-input" placeholder="localhost" required>
                    <div class="field-help">æœåŠ¡å™¨çš„IPåœ°å€æˆ–åŸŸå</div>
                </div>
                
                <div class="form-group">
                    <label for="mcp-server-port">ç«¯å£å· *</label>
                    <input type="number" id="mcp-server-port" class="form-input" placeholder="3000" min="1" max="65535" required>
                    <div class="field-help">MCPæœåŠ¡å™¨ç›‘å¬çš„ç«¯å£å·</div>
                </div>
                
                <div class="form-group">
                    <label for="mcp-server-protocol">åè®®ç±»å‹</label>
                    <select id="mcp-server-protocol" class="form-select">
                        <option value="stdio">STDIO</option>
                        <option value="http">HTTP</option>
                        <option value="websocket">WebSocket</option>
                        <option value="tcp">TCP</option>
                    </select>
                    <div class="field-help">MCPæœåŠ¡å™¨ä½¿ç”¨çš„é€šä¿¡åè®®</div>
                </div>
                
                <div class="form-group full-width">
                    <label for="mcp-server-description">æè¿°</label>
                    <textarea id="mcp-server-description" class="form-textarea" rows="3" placeholder="æè¿°æœåŠ¡å™¨çš„åŠŸèƒ½å’Œç”¨é€”..."></textarea>
                </div>
                
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="mcp-server-enabled" class="checkbox" checked>
                        <label for="mcp-server-enabled">å¯ç”¨æœåŠ¡å™¨</label>
                    </div>
                </div>
            </form>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-secondary mcp-modal-close">å–æ¶ˆ</button>
            <button id="save-mcp-server-btn" class="btn btn-primary">æ·»åŠ æœåŠ¡å™¨</button>
        </div>
    </div>
</div>

<!-- åˆ é™¤ç¡®è®¤æ¨¡æ€æ¡† -->
<div id="delete-mcp-server-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>ç¡®è®¤åˆ é™¤</h3>
            <button class="modal-close mcp-modal-close">&times;</button>
        </div>
        
        <div class="modal-body">
            <div class="warning-content">
                <div class="warning-icon">âš ï¸</div>
                <div class="warning-text">
                    <p>ç¡®å®šè¦åˆ é™¤MCPæœåŠ¡å™¨ <strong id="delete-mcp-server-name"></strong> å—ï¼Ÿ</p>
                    <p class="text-danger">æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼ŒæœåŠ¡å™¨çš„æ‰€æœ‰é…ç½®å’Œè¿æ¥å†å²å°†è¢«åˆ é™¤ã€‚</p>
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-secondary mcp-modal-close">å–æ¶ˆ</button>
            <button id="confirm-delete-mcp-server-btn" class="btn btn-danger">ç¡®è®¤åˆ é™¤</button>
        </div>
    </div>
</div>

<style>
/* MCPç®¡ç†ç‰¹å®šæ ·å¼ */
.mcp-management {
    padding: 20px;
}

.intro-section {
    margin-bottom: 30px;
}

.intro-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 12px;
    padding: 24px;
    display: flex;
    align-items: center;
    gap: 20px;
}

.intro-icon {
    font-size: 48px;
    opacity: 0.9;
}

.intro-content h3 {
    margin: 0 0 12px 0;
    font-size: 20px;
}

.intro-content p {
    margin: 0;
    opacity: 0.9;
    line-height: 1.6;
}

.server-stats {
    display: flex;
    gap: 20px;
    align-items: center;
}

.stat-item {
    display: flex;
    align-items: center;
    gap: 4px;
}

.stat-label {
    color: #6b7280;
    font-size: 14px;
}

.stat-value {
    font-weight: 600;
    color: #1f2937;
}

.servers-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.mcp-server-card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    padding: 20px;
    border-left: 4px solid #10b981;
    transition: all 0.2s ease;
}

.mcp-server-card:hover {
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    transform: translateY(-1px);
}

.mcp-server-card.disabled {
    border-left-color: #9ca3af;
    opacity: 0.7;
}

.server-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 15px;
}

.server-info h3.server-name {
    margin: 0 0 4px 0;
    color: #1f2937;
    font-size: 18px;
}

.server-endpoint {
    color: #6b7280;
    font-size: 14px;
    font-family: monospace;
}

.server-details {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 15px;
}

.detail-item {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
}

.detail-label {
    color: #6b7280;
}

.detail-value {
    color: #1f2937;
    font-weight: 500;
}

.server-description {
    color: #6b7280;
    font-size: 14px;
    line-height: 1.5;
    margin-bottom: 15px;
    min-height: 20px;
}

.server-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.templates-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.template-card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    padding: 20px;
    transition: all 0.2s ease;
}

.template-card:hover {
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    transform: translateY(-1px);
}

.template-icon {
    font-size: 32px;
    margin-bottom: 12px;
}

.template-content h4 {
    margin: 0 0 8px 0;
    color: #1f2937;
}

.template-content p {
    margin: 0 0 12px 0;
    color: #6b7280;
    font-size: 14px;
    line-height: 1.5;
}

.template-features {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 15px;
}

.feature-tag {
    background: #f3f4f6;
    color: #374151;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
}

.docs-section {
    margin-top: 40px;
}

.docs-card {
    background: #f8fafc;
    border: 2px dashed #cbd5e1;
    border-radius: 12px;
    padding: 24px;
    text-align: center;
}

.docs-icon {
    font-size: 48px;
    margin-bottom: 16px;
}

.docs-content h3 {
    margin: 0 0 12px 0;
    color: #1f2937;
}

.docs-content p {
    margin: 0 0 20px 0;
    color: #6b7280;
}

.docs-links {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 16px;
}

.docs-link {
    color: #3b82f6;
    text-decoration: none;
    font-weight: 500;
    padding: 8px 16px;
    border-radius: 6px;
    transition: background-color 0.2s ease;
}

.docs-link:hover {
    background-color: #dbeafe;
}

.empty-state {
    text-align: center;
    padding: 60px 20px;
    color: #6b7280;
}

.empty-icon {
    font-size: 64px;
    margin-bottom: 16px;
}

.empty-state h3 {
    margin: 0 0 8px 0;
    color: #374151;
}

.empty-state p {
    margin: 0;
}

.full-width {
    grid-column: 1 / -1;
}

/* çŠ¶æ€æ ·å¼ */
.status-badge.status-success {
    background-color: #dcfce7;
    color: #166534;
}

.status-badge.status-error {
    background-color: #fee2e2;
    color: #dc2626;
}

.status-badge.status-warning {
    background-color: #fef3c7;
    color: #d97706;
}

.status-badge.status-secondary {
    background-color: #f3f4f6;
    color: #6b7280;
}
</style>
