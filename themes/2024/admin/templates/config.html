<div class="config-management">
    <!-- 配置管理头部 -->
    <div class="page-header">
        <div class="header-left">
            <h2>系统配置</h2>
            <p>管理系统的各项配置设置，包括基本设置、上传限制、安全配置等</p>
        </div>
        <div class="header-right">
            <button id="export-config-btn" class="btn btn-secondary">
                <i class="icon-download"></i> 导出配置
            </button>
            <button id="import-config-btn" class="btn btn-secondary">
                <i class="icon-upload"></i> 导入配置
            </button>
            <button id="reset-config-btn" class="btn btn-warning">
                <i class="icon-refresh"></i> 重置配置
            </button>
            <button id="save-config-btn" class="btn btn-primary">
                <i class="icon-save"></i> 保存配置
            </button>
        </div>
    </div>

    <!-- 配置导航 -->
    <div class="config-navigation">
        <div class="nav-tabs">
            <button class="config-category-btn active" data-category="basic">
                <i class="icon-settings"></i> 基本设置
            </button>
            <button class="config-category-btn" data-category="upload">
                <i class="icon-upload"></i> 上传设置
            </button>
            <button class="config-category-btn" data-category="security">
                <i class="icon-shield"></i> 安全设置
            </button>
            <button class="config-category-btn" data-category="notification">
                <i class="icon-bell"></i> 通知设置
            </button>
            <button class="config-category-btn" data-category="advanced">
                <i class="icon-cog"></i> 高级设置
            </button>
        </div>
    </div>

    <!-- 配置内容 -->
    <div class="config-content">
        <!-- 基本设置 -->
        <div id="basic-config-panel" class="config-panel">
            <div class="panel-header">
                <h3>基本设置</h3>
                <p>配置网站的基本信息和显示设置</p>
            </div>
            
            <form class="config-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="site-title">网站标题 *</label>
                        <input type="text" id="site-title" class="form-input" placeholder="FileCodeBox">
                        <div class="field-help">显示在浏览器标题栏和网站页眉的标题</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="site-url">网站URL</label>
                        <input type="url" id="site-url" class="form-input" placeholder="https://example.com">
                        <div class="field-help">网站的完整URL地址，用于生成绝对链接</div>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="site-description">网站描述</label>
                        <textarea id="site-description" class="form-textarea" rows="3" placeholder="简单易用的文件分享平台"></textarea>
                        <div class="field-help">显示在网站首页的描述信息</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="admin-email">管理员邮箱</label>
                        <input type="email" id="admin-email" class="form-input" placeholder="admin@example.com">
                        <div class="field-help">接收系统通知和报警的邮箱地址</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="timezone">时区</label>
                        <select id="timezone" class="form-select">
                            <option value="Asia/Shanghai">Asia/Shanghai (UTC+8)</option>
                            <option value="UTC">UTC (UTC+0)</option>
                            <option value="America/New_York">America/New_York (UTC-5)</option>
                            <option value="Europe/London">Europe/London (UTC+0)</option>
                            <option value="Asia/Tokyo">Asia/Tokyo (UTC+9)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="language">默认语言</label>
                        <select id="language" class="form-select">
                            <option value="zh-CN">简体中文</option>
                            <option value="en-US">English</option>
                            <option value="ja-JP">日本語</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="theme">主题</label>
                        <select id="theme" class="form-select">
                            <option value="default">默认主题</option>
                            <option value="dark">深色主题</option>
                            <option value="light">浅色主题</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>

        <!-- 上传设置 -->
        <div id="upload-config-panel" class="config-panel" style="display: none;">
            <div class="panel-header">
                <h3>上传设置</h3>
                <p>配置文件上传的限制和规则</p>
            </div>
            
            <form class="config-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="upload-max-size">单文件最大大小</label>
                        <div class="input-group">
                            <input type="number" id="upload-max-size" class="form-input" placeholder="10" min="1">
                            <select id="upload-max-size-unit" class="form-select" style="width: auto;">
                                <option value="MB">MB</option>
                                <option value="GB">GB</option>
                                <option value="KB">KB</option>
                            </select>
                        </div>
                        <div class="field-help">单个文件上传的最大大小限制</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="upload-max-files">用户最大文件数</label>
                        <input type="number" id="upload-max-files" class="form-input" placeholder="1000" min="0">
                        <div class="field-help">每个用户可以上传的最大文件数量，0表示无限制</div>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="upload-allowed-types">允许的文件类型</label>
                        <input type="text" id="upload-allowed-types" class="form-input" placeholder="jpg,png,gif,pdf,doc,txt">
                        <div class="field-help">允许上传的文件扩展名，用逗号分隔，留空表示允许所有类型</div>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="upload-prohibited-types">禁止的文件类型</label>
                        <input type="text" id="upload-prohibited-types" class="form-input" placeholder="exe,bat,com,scr">
                        <div class="field-help">禁止上传的文件扩展名，用逗号分隔</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="upload-expire-days">默认过期天数</label>
                        <input type="number" id="upload-expire-days" class="form-input" placeholder="30" min="0">
                        <div class="field-help">文件的默认过期天数，0表示永不过期</div>
                    </div>
                    
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="upload-auto-delete" class="checkbox">
                            <label for="upload-auto-delete">自动删除过期文件</label>
                        </div>
                        <div class="field-help">启用后系统会自动清理过期的文件</div>
                    </div>
                    
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="upload-require-auth" class="checkbox">
                            <label for="upload-require-auth">上传需要登录</label>
                        </div>
                        <div class="field-help">启用后只有登录用户才能上传文件</div>
                    </div>
                </div>
            </form>
        </div>

        <!-- 安全设置 -->
        <div id="security-config-panel" class="config-panel" style="display: none;">
            <div class="panel-header">
                <h3>安全设置</h3>
                <p>配置系统的安全选项和访问控制</p>
            </div>
            
            <form class="config-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="security-login-attempts">最大登录尝试次数</label>
                        <input type="number" id="security-login-attempts" class="form-input" placeholder="5" min="1" max="100">
                        <div class="field-help">用户连续登录失败的最大次数</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="security-lockout-duration">锁定持续时间 (分钟)</label>
                        <input type="number" id="security-lockout-duration" class="form-input" placeholder="30" min="1">
                        <div class="field-help">达到最大尝试次数后的锁定时间</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="security-session-timeout">会话超时时间 (小时)</label>
                        <input type="number" id="security-session-timeout" class="form-input" placeholder="24" min="1">
                        <div class="field-help">用户会话的自动超时时间</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="security-rate-limit">API速率限制 (请求/小时)</label>
                        <input type="number" id="security-rate-limit" class="form-input" placeholder="1000" min="1">
                        <div class="field-help">每个IP每小时的最大API请求次数</div>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="security-api-key">API 密钥</label>
                        <div class="input-group">
                            <input type="text" id="security-api-key" class="form-input" placeholder="自动生成的API密钥">
                            <button type="button" id="generate-api-key-btn" class="btn btn-secondary">生成新密钥</button>
                        </div>
                        <div class="field-help">用于API访问的密钥，请妥善保管</div>
                    </div>
                    
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="security-force-https" class="checkbox">
                            <label for="security-force-https">强制HTTPS</label>
                        </div>
                        <div class="field-help">强制所有连接使用HTTPS协议</div>
                    </div>
                    
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="security-csrf-protection" class="checkbox" checked>
                            <label for="security-csrf-protection">CSRF保护</label>
                        </div>
                        <div class="field-help">启用跨站请求伪造保护</div>
                    </div>
                    
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="security-cors-enabled" class="checkbox">
                            <label for="security-cors-enabled">启用CORS</label>
                        </div>
                        <div class="field-help">允许跨域资源共享</div>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="security-cors-origins">允许的CORS来源</label>
                        <input type="text" id="security-cors-origins" class="form-input" placeholder="https://example.com,https://app.example.com">
                        <div class="field-help">允许跨域访问的来源URL，用逗号分隔</div>
                    </div>
                </div>
            </form>
        </div>

        <!-- 通知设置 -->
        <div id="notification-config-panel" class="config-panel" style="display: none;">
            <div class="panel-header">
                <h3>通知设置</h3>
                <p>配置邮件通知和Webhook通知</p>
            </div>
            
            <form class="config-form">
                <div class="form-section">
                    <h4>邮件通知</h4>
                    
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="notification-email-enabled" class="checkbox">
                            <label for="notification-email-enabled">启用邮件通知</label>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="notification-smtp-host">SMTP 主机 *</label>
                            <input type="text" id="notification-smtp-host" class="form-input" placeholder="smtp.gmail.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="notification-smtp-port">SMTP 端口 *</label>
                            <input type="number" id="notification-smtp-port" class="form-input" placeholder="587" min="1" max="65535">
                        </div>
                        
                        <div class="form-group">
                            <label for="notification-smtp-username">SMTP 用户名 *</label>
                            <input type="text" id="notification-smtp-username" class="form-input" placeholder="your-email@gmail.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="notification-smtp-password">SMTP 密码 *</label>
                            <input type="password" id="notification-smtp-password" class="form-input" placeholder="应用专用密码">
                        </div>
                        
                        <div class="form-group">
                            <label for="notification-smtp-encryption">加密方式</label>
                            <select id="notification-smtp-encryption" class="form-select">
                                <option value="tls">TLS</option>
                                <option value="ssl">SSL</option>
                                <option value="none">无加密</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="notification-from-email">发件人邮箱 *</label>
                            <input type="email" id="notification-from-email" class="form-input" placeholder="noreply@example.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="notification-from-name">发件人名称</label>
                            <input type="text" id="notification-from-name" class="form-input" placeholder="FileCodeBox">
                        </div>
                        
                        <div class="form-group">
                            <button type="button" id="test-email-btn" class="btn btn-secondary">测试邮件配置</button>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h4>Webhook 通知</h4>
                    
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="notification-webhook-enabled" class="checkbox">
                            <label for="notification-webhook-enabled">启用Webhook通知</label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="notification-webhook-url">Webhook URL</label>
                        <input type="url" id="notification-webhook-url" class="form-input" placeholder="https://your-server.com/webhook">
                        <div class="field-help">接收通知的Webhook地址</div>
                    </div>
                </div>
            </form>
        </div>

        <!-- 高级设置 -->
        <div id="advanced-config-panel" class="config-panel" style="display: none;">
            <div class="panel-header">
                <h3>高级设置</h3>
                <p>配置系统的高级选项和性能参数</p>
            </div>
            
            <form class="config-form">
                <div class="form-section">
                    <h4>日志设置</h4>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <div class="checkbox-group">
                                <input type="checkbox" id="advanced-debug-mode" class="checkbox">
                                <label for="advanced-debug-mode">调试模式</label>
                            </div>
                            <div class="field-help">启用后会输出详细的调试信息</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="advanced-log-level">日志级别</label>
                            <select id="advanced-log-level" class="form-select">
                                <option value="debug">Debug</option>
                                <option value="info">Info</option>
                                <option value="warn">Warning</option>
                                <option value="error">Error</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="advanced-log-retention">日志保留天数</label>
                            <input type="number" id="advanced-log-retention" class="form-input" placeholder="30" min="1">
                            <div class="field-help">自动清理多少天前的日志文件</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h4>缓存设置</h4>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <div class="checkbox-group">
                                <input type="checkbox" id="advanced-cache-enabled" class="checkbox" checked>
                                <label for="advanced-cache-enabled">启用缓存</label>
                            </div>
                            <div class="field-help">启用内存缓存以提高性能</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="advanced-cache-ttl">缓存TTL (秒)</label>
                            <input type="number" id="advanced-cache-ttl" class="form-input" placeholder="3600" min="1">
                            <div class="field-help">缓存数据的生存时间</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h4>性能设置</h4>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <div class="checkbox-group">
                                <input type="checkbox" id="advanced-compression-enabled" class="checkbox" checked>
                                <label for="advanced-compression-enabled">启用压缩</label>
                            </div>
                            <div class="field-help">启用Gzip压缩以减少传输大小</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="advanced-compression-level">压缩级别</label>
                            <input type="range" id="advanced-compression-level" class="form-range" min="1" max="9" value="6">
                            <div class="field-help">压缩级别 (1=最快, 9=最小)</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="advanced-worker-count">工作进程数</label>
                            <input type="number" id="advanced-worker-count" class="form-input" placeholder="4" min="1" max="32">
                            <div class="field-help">并发处理的工作进程数量</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="advanced-database-pool">数据库连接池大小</label>
                            <input type="number" id="advanced-database-pool" class="form-input" placeholder="10" min="1" max="100">
                            <div class="field-help">数据库连接池的最大连接数</div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- 导入配置模态框 -->
<div id="import-config-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>导入配置</h3>
            <button class="modal-close config-modal-close">&times;</button>
        </div>
        
        <div class="modal-body">
            <div class="form-group">
                <label for="config-file-input">选择配置文件</label>
                <input type="file" id="config-file-input" class="form-input" accept=".json">
                <div class="field-help">请选择之前导出的JSON格式配置文件</div>
            </div>
            
            <div class="warning-content">
                <div class="warning-icon">⚠️</div>
                <div class="warning-text">
                    <p><strong>注意：</strong></p>
                    <ul>
                        <li>导入配置将覆盖当前所有设置</li>
                        <li>建议先导出当前配置作为备份</li>
                        <li>导入后系统可能需要重启</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-secondary config-modal-close">取消</button>
            <button id="import-config-file-btn" class="btn btn-primary">导入配置</button>
        </div>
    </div>
</div>

<!-- 重置配置确认模态框 -->
<div id="reset-config-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>重置配置</h3>
            <button class="modal-close config-modal-close">&times;</button>
        </div>
        
        <div class="modal-body">
            <div class="warning-content">
                <div class="warning-icon">⚠️</div>
                <div class="warning-text">
                    <p>确定要将所有配置重置为默认值吗？</p>
                    <p class="text-danger">此操作不可撤销，所有自定义配置将丢失。</p>
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-secondary config-modal-close">取消</button>
            <button id="confirm-reset-config-btn" class="btn btn-danger">确认重置</button>
        </div>
    </div>
</div>

<style>
/* 配置管理特定样式 */
.config-management {
    padding: 20px;
}

.config-navigation {
    margin-bottom: 30px;
    border-bottom: 1px solid #e5e7eb;
}

.nav-tabs {
    display: flex;
    gap: 0;
    overflow-x: auto;
}

.config-category-btn {
    background: none;
    border: none;
    padding: 12px 20px;
    cursor: pointer;
    border-bottom: 3px solid transparent;
    transition: all 0.2s ease;
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: 8px;
    color: #6b7280;
    font-weight: 500;
}

.config-category-btn:hover {
    color: #3b82f6;
    background-color: #f8fafc;
}

.config-category-btn.active {
    color: #3b82f6;
    border-bottom-color: #3b82f6;
    background-color: #f8fafc;
}

.config-panel {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    padding: 24px;
}

.panel-header {
    margin-bottom: 24px;
    padding-bottom: 16px;
    border-bottom: 1px solid #e5e7eb;
}

.panel-header h3 {
    margin: 0 0 8px 0;
    color: #1f2937;
    font-size: 20px;
}

.panel-header p {
    margin: 0;
    color: #6b7280;
}

.config-form {
    max-width: none;
}

.form-section {
    margin-bottom: 32px;
    padding-bottom: 24px;
    border-bottom: 1px solid #f3f4f6;
}

.form-section:last-child {
    border-bottom: none;
    margin-bottom: 0;
}

.form-section h4 {
    margin: 0 0 16px 0;
    color: #374151;
    font-size: 16px;
    font-weight: 600;
}

.input-group {
    display: flex;
    gap: 8px;
}

.input-group .form-input {
    flex: 1;
}

.form-range {
    width: 100%;
    height: 6px;
    border-radius: 3px;
    background: #e5e7eb;
    outline: none;
    -webkit-appearance: none;
    appearance: none;
}

.form-range::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #3b82f6;
    cursor: pointer;
    border: 2px solid white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.form-range::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #3b82f6;
    cursor: pointer;
    border: 2px solid white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.full-width {
    grid-column: 1 / -1;
}

/* 保存状态指示 */
.btn.btn-warning {
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.7; }
    100% { opacity: 1; }
}

/* 响应式 */
@media (max-width: 768px) {
    .nav-tabs {
        flex-direction: column;
    }
    
    .config-category-btn {
        justify-content: center;
        border-bottom: none;
        border-left: 3px solid transparent;
    }
    
    .config-category-btn.active {
        border-bottom: none;
        border-left-color: #3b82f6;
    }
}
</style>
