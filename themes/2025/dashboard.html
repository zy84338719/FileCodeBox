<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户中心 - FileCodeBox</title>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/logo-small.svg">
    
    <!-- 引入CSS文件 -->
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/components.css">
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/responsive.css">
    <link rel="stylesheet" href="/css/dashboard.css">
</head>
<body>
    <div class="container">
        <!-- 头部 -->
        <div class="header">
            <div class="logo">
                <img class="logo-icon" src="/assets/images/logo-small.svg" alt="FileCodeBox Logo"/>
                <span>FileCodeBox - 用户中心</span>
            </div>
            <div class="user-info">
                <div class="user-avatar" id="user-avatar"></div>
                <div class="user-name" id="user-name">用户</div>
                <button class="admin-btn" id="admin-btn" onclick="Dashboard.goToAdmin()" style="display: none;">管理后台</button>
                <button class="logout-btn" onclick="UserAuth.logout()">退出登录</button>
            </div>
        </div>
        
        <!-- 导航标签 -->
        <div class="nav-tabs">
            <div class="tabs">
                <button class="tab active" onclick="Dashboard.switchTab('dashboard', event)">仪表板</button>
                <button class="tab" onclick="Dashboard.switchTab('upload', event)">上传文件</button>
                <button class="tab" onclick="Dashboard.switchTab('files', event)">我的文件</button>
                <button class="tab" onclick="Dashboard.switchTab('profile', event)">个人资料</button>
            </div>
            
            <!-- 仪表板 -->
            <div id="dashboard-content" class="tab-content active">
                <div class="stats-grid" id="stats-grid">
                    <!-- 统计卡片将动态加载 -->
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <div class="section-title">📊 使用统计</div>
                    </div>
                    <!-- <div class="section-content"> -->
                        <div class="form-group">
                            <label>存储使用情况</label>
                            <div class="progress-bar">
                                <div class="progress-fill" id="storage-progress" style="width: 0%"></div>
                            </div>
                            <small id="storage-text">正在加载...</small>
                        </div>
                    <!-- </div> -->
                </div>
            </div>
            
            <!-- 上传文件 -->
            <div id="upload-content" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <div class="section-title">📤 上传文件</div>
                    </div>
                    <!-- <div class="section-content"> -->
                        <form id="upload-form" enctype="multipart/form-data">
                            <div class="upload-area" id="upload-area">
                                <div class="upload-text" id="upload-text">点击选择文件或拖拽到此处</div>
                                <div class="upload-hint">支持所有文件类型</div>
                                <input type="file" id="file-input" style="display: none;" />
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="expire_style">过期方式</label>
                                    <select id="expire_style" name="expire_style">
                                        <option value="day">按天过期</option>
                                        <option value="hour">按小时过期</option>
                                        <option value="count">按次数过期</option>
                                        <option value="forever">永久有效</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="expire_value">过期值</label>
                                    <input type="number" id="expire_value" name="expire_value" value="7" min="1" max="365">
                                </div>
                            </div>
                            
                            <div class="checkbox-group">
                                <input type="checkbox" id="require_auth" name="require_auth">
                                <label for="require_auth">需要登录下载</label>
                            </div>
                            
                            <button type="submit" class="btn" id="upload-btn">上传文件</button>
                            
                            <div class="progress" id="upload-progress">
                                <div class="progress-fill" id="upload-progress-fill"></div>
                            </div>
                            
                            <div id="upload-result"></div>
                        </form>
                    <!-- </div> -->
                </div>
            </div>
            
            <!-- 我的文件 -->
            <div id="files-content" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <div class="section-title">📁 我的文件</div>
                    </div>
                    <!-- <div class="section-content"> -->
                        <div id="files-list">
                            <!-- 文件列表将动态加载 -->
                        </div>
                    <!-- </div> -->
                </div>
            </div>
            
            <!-- 个人资料 -->
            <div id="profile-content" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <div class="section-title">👤 个人资料</div>
                    </div>
                    <!-- <div class="section-content"> -->
                        <form id="profile-form">
                            <div class="form-group">
                                <label for="username">用户名</label>
                                <input type="text" id="username" name="username" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label for="email">邮箱</label>
                                <input type="email" id="email" name="email" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label for="nickname">昵称</label>
                                <input type="text" id="nickname" name="nickname" placeholder="请输入昵称">
                            </div>
                            
                            <div class="form-group">
                                <label for="created_at">注册时间</label>
                                <input type="text" id="created_at" name="created_at" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label for="last_login_at">最后登录</label>
                                <input type="text" id="last_login_at" name="last_login_at" readonly>
                            </div>
                            
                            <button type="submit" class="btn">更新资料</button>
                        </form>
                        
                        <hr style="margin: 30px 0;">
                        
                        <h3>修改密码</h3>
                        <form id="password-form">
                            <div class="form-group">
                                <label for="old_password">当前密码</label>
                                <input type="password" id="old_password" name="old_password" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="new_password">新密码</label>
                                <input type="password" id="new_password" name="new_password" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="confirm_password">确认新密码</label>
                                <input type="password" id="confirm_password" name="confirm_password" required>
                            </div>
                            
                            <button type="submit" class="btn btn-secondary">修改密码</button>
                        </form>
                    </div>
                <!-- </div> -->
            </div>
        </div>
    </div>
    
    <!-- 通知容器 -->
    <div id="notification-container"></div>
    
    <!-- 引入JavaScript文件 -->
    <script src="/js/utils.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/dashboard.js"></script>
</body>
</html>